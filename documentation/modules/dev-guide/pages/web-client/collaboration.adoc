= Views Collaboration
:toc:
:toc-title:

> üè∑Ô∏è Available in Axelor Enterprise edition

Views collaboration allows to see users that are seeing/editing/updating the current opened record.

== Overview

If you open a record at the same time as another user, their profile picture will appear to the right
of the record's toolbar.

By default, a green border surrounds the profile picture. This means that the user is simply consulting the record.

image::collaboration-user-idle.png[]

If the user is editing the record, the border turns orange.

image::collaboration-user-edit.png[]

If the user saves their changes, the border turns red: the data on your page is no longer
up to date with the database and you may need to refresh your page.

image::collaboration-user-save.png[]

== Options

Feature can be disabled with `view.collaboration.enabled` property. By default, it is enabled.
On groups, there is a boolean `canViewCollaboration` to determine whether members
can view collaboration (`true` by default).

=== Multi-instance

When using a multi-instance configuration with `application.cache.provider = redisson`, https://valkey.io/topics/pubsub/[Redis/Valkey Publish-Subscribe] messaging is used for view collaboration communication between instances.

Alternatively, you can opt for an https://www.amqp.org[AMQP 1.0] message broker (https://www.rabbitmq.com/[RabbitMQ], https://activemq.apache.org/components/artemis/[ActiveMQ Artemis], etc.) by configuring the `view.collaboration.amqp.*` properties. In this case, ensure the specified address supports publish-subscribe behavior (often referred to as a fanout exchange type, multicast routing type, or similar, depending on your broker).

View collaboration AMQP properties:

[cols="2,3"]
|===
| Key Name                                 | Description
| `view.collaboration.amqp.url`            | AMQP 1.0 broker URL for view collaboration (üè∑Ô∏è EE only)
| `view.collaboration.amqp.address`        | AMQP 1.0 address for view collaboration (üè∑Ô∏è EE only)
| `view.collaboration.amqp.source-address` | AMQP 1.0 source address for view collaboration (üè∑Ô∏è EE only)
| `view.collaboration.amqp.target-address` | AMQP 1.0 target address for view collaboration (üè∑Ô∏è EE only)
| `view.collaboration.amqp.username`       | AMQP 1.0 broker username for view collaboration (üè∑Ô∏è EE only)
| `view.collaboration.amqp.password`       | AMQP 1.0 broker password for view collaboration (üè∑Ô∏è EE only)
|===

Use `source-address` and `target-address` if separate addresses are needed for consumers and producers.
If the same address can be used for both, configure only the `address` property.

Each broker has its own address format, so refer to your broker‚Äôs documentation for guidance.
Below are links to addressing documentation for some popular brokers:

- https://www.rabbitmq.com/docs/amqp#addresses[RabbitMQ Addressing]
- https://activemq.apache.org/components/artemis/documentation/latest/#addressing[ActiveMQ Artemis Addressing]

Example AMQP 1.0 configuration for view collaboration using pre-declared RabbitMQ fanout exchange:

[source,properties]
----
view.collaboration.amqp.url = amqp://localhost:5672
view.collaboration.amqp.address = /exchange/amq.fanout
view.collaboration.amqp.username = guest
view.collaboration.amqp.password = guest
----

== Limitation

Only records displayed on top form are supported. Popup and others record rendering aren't supported.